<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/login.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="website icon" href="main-image/Snapseed.jpg" />
  </head>

  <body>
    <header>
      <nav>
        <a href="home.html" class="logo">LHB_CLUB</a>

        <ul class="navbar">
          <li><a href="home.html" id="active" class="a">Home</a></li>
          <li><a href="aboutus.html" class="a">About</a></li>
          <div class="dropdown">
            <li><a href="#" class="a" id="brand1">Brand Categories</a></li>
            <div class="content">
              <a href="nrf.html">NoReplacementFound</a>
              <a href="sisburma.html">Sisburma</a><br />
              <a href="stable_edge.html">StableEdge</a>
            </div>
          </div>
          <li><a href="contact.html" class="a">Contact</a></li>
        </ul>

        <div class="right-elements">
          <a href="#" class="cart">
            <i class="fa-solid fa-bag-shopping"></i>
            <span class="cart-badge"></span>
          </a>

          <a href="login.html" class="user">
            <i class="fa-solid fa-user"></i>
          </a>
        </div>
      </nav>
    </header>
    <!-- header end ---------------------------------------------------------------------------->

    <div id="overlay" class="overlay"></div>
    <div class="cartTab">
      <div class="cardTabContaier" style="position: relative">
        <div class="cartTabHeader">
          <span style="font-size: 20px; color: black; padding: 15px">Card</span>

          <i
            class="fa-solid fa-xmark close"
            style="font-size: 20px; color: black; padding: 15px"
          ></i>
        </div>
        <div class="cartTabContentContainer">
          <!-- items will be here -->
        </div>
        <div class="cartTabFooter">
          <div class="cartTabTotal">
            <p style="padding: 15px; margin-left: 6px">SubTotal:</p>
            <span
              style="color: black; position: absolute; margin-left: 305px"
              class="CartTabSubTotalPrice"
              >12000ks</span
            >
          </div>

          <button
            style="
              width: 350px;
              margin-left: 20px;
              padding: 15px;
              background-color: #2c2c2c;
              color: #ffff;
            "
            id="checkout-button"
          >
            Checkout
          </button>
        </div>
      </div>
    </div>

    <!-- ------------ -->

    <form class="form">
      <div class="flex-column">
        <label>Email </label>
      </div>
      <div class="inputForm">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          viewBox="0 0 32 32"
          height="20"
        >
          <g data-name="Layer 3" id="Layer_3">
            <path
              d="m30.853 13.87a15 15 0 0 0 -29.729 4.082 15.1 15.1 0 0 0 12.876 12.918 15.6 15.6 0 0 0 2.016.13 14.85 14.85 0 0 0 7.715-2.145 1 1 0 1 0 -1.031-1.711 13.007 13.007 0 1 1 5.458-6.529 2.149 2.149 0 0 1 -4.158-.759v-10.856a1 1 0 0 0 -2 0v1.726a8 8 0 1 0 .2 10.325 4.135 4.135 0 0 0 7.83.274 15.2 15.2 0 0 0 .823-7.455zm-14.853 8.13a6 6 0 1 1 6-6 6.006 6.006 0 0 1 -6 6z"
            ></path>
          </g>
        </svg>
        <input placeholder="Enter your Email" class="input" type="text" />
      </div>

      <div class="flex-column">
        <label>Password </label>
      </div>
      <div class="inputForm">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          viewBox="-64 0 512 512"
          height="20"
        >
          <path
            d="m336 512h-288c-26.453125 0-48-21.523438-48-48v-224c0-26.476562 21.546875-48 48-48h288c26.453125 0 48 21.523438 48 48v224c0 26.476562-21.546875 48-48 48zm-288-288c-8.8125 0-16 7.167969-16 16v224c0 8.832031 7.1875 16 16 16h288c8.8125 0 16-7.167969 16-16v-224c0-8.832031-7.1875-16-16-16zm0 0"
          ></path>
          <path
            d="m304 224c-8.832031 0-16-7.167969-16-16v-80c0-52.929688-43.070312-96-96-96s-96 43.070312-96 96v80c0 8.832031-7.167969 16-16 16s-16-7.167969-16-16v-80c0-70.59375 57.40625-128 128-128s128 57.40625 128 128v80c0 8.832031-7.167969 16-16 16zm0 0"
          ></path>
        </svg>
        <input
          placeholder="Enter your Password"
          class="input"
          type="password"
        />
      </div>

      <div class="flex-row">
        <div>
          <input type="radio" />
          <label>Remember me </label>
        </div>
        <span class="span">Forgot password?</span>
      </div>
      <a href="home.html"> <button class="button-submit">Sign In</button></a>
      <p class="p">
        Don't have an account? <a href="signup.html" class="span">Sign Up</a>
      </p>
      <p class="p line">Or With</p>

      <div class="flex-row">
        <button class="btn google">
          <svg
            xml:space="preserve"
            style="enable-background: new 0 0 512 512"
            viewBox="0 0 512 512"
            y="0px"
            x="0px"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xmlns="http://www.w3.org/2000/svg"
            id="Layer_1"
            width="20"
            version="1.1"
          >
            <path
              d="M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256
      c0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456
      C103.821,274.792,107.225,292.797,113.47,309.408z"
              style="fill: #fbbb00"
            ></path>
            <path
              d="M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451
      c-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535
      c29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z"
              style="fill: #518ef8"
            ></path>
            <path
              d="M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512
      c-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771
      c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z"
              style="fill: #28b446"
            ></path>
            <path
              d="M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012
      c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0
      C318.115,0,375.068,22.126,419.404,58.936z"
              style="fill: #f14336"
            ></path>
          </svg>

          Google</button
        ><button class="btn apple">
          <svg
            xml:space="preserve"
            style="enable-background: new 0 0 22.773 22.773"
            viewBox="0 0 22.773 22.773"
            y="0px"
            x="0px"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xmlns="http://www.w3.org/2000/svg"
            id="Capa_1"
            width="20"
            height="20"
            version="1.1"
          >
            <g>
              <g>
                <path
                  d="M15.769,0c0.053,0,0.106,0,0.162,0c0.13,1.606-0.483,2.806-1.228,3.675c-0.731,0.863-1.732,1.7-3.351,1.573 c-0.108-1.583,0.506-2.694,1.25-3.561C13.292,0.879,14.557,0.16,15.769,0z"
                ></path>
                <path
                  d="M20.67,16.716c0,0.016,0,0.03,0,0.045c-0.455,1.378-1.104,2.559-1.896,3.655c-0.723,0.995-1.609,2.334-3.191,2.334 c-1.367,0-2.275-0.879-3.676-0.903c-1.482-0.024-2.297,0.735-3.652,0.926c-0.155,0-0.31,0-0.462,0 c-0.995-0.144-1.798-0.932-2.383-1.642c-1.725-2.098-3.058-4.808-3.306-8.276c0-0.34,0-0.679,0-1.019 c0.105-2.482,1.311-4.5,2.914-5.478c0.846-0.52,2.009-0.963,3.304-0.765c0.555,0.086,1.122,0.276,1.619,0.464 c0.471,0.181,1.06,0.502,1.618,0.485c0.378-0.011,0.754-0.208,1.135-0.347c1.116-0.403,2.21-0.865,3.652-0.648 c1.733,0.262,2.963,1.032,3.723,2.22c-1.466,0.933-2.625,2.339-2.427,4.74C17.818,14.688,19.086,15.964,20.67,16.716z"
                ></path>
              </g>
            </g>
          </svg>

          Apple
        </button>
      </div>
    </form>
    <script>
      // Select elements from the DOM
      const cartIcon = document.querySelector(".cart i");
      const cartBadge = document.querySelector(".cart-badge");
      const body = document.querySelector("body");
      const closeCart = document.querySelector(".cartTab .close");
      const overlay = document.getElementById("overlay");
      const cartTabContentContainer = document.querySelector(
        ".cartTabContentContainer"
      );

      // Initialize cart from localStorage
      let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

      // Function to update the cart badge (item count)
      const updateCartBadge = () => {
        const totalItems = cartItems.reduce(
          (sum, item) => sum + item.quantity,
          0
        );
        if (totalItems > 0) {
          cartBadge.textContent = totalItems;
          cartBadge.style.display = "block";
        } else {
          cartBadge.style.display = "none";
        }
      };

      // checkout

      document
        .getElementById("checkout-button")
        .addEventListener("click", function () {
          // Assuming cartItems are stored in localStorage
          const cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

          // Check if cart has items before proceeding to checkout
          if (cartItems.length > 0) {
            // Optionally: Store any necessary data in sessionStorage (or URL parameters)
            sessionStorage.setItem(
              "cartCheckoutData",
              JSON.stringify(cartItems)
            );

            // Navigate to the checkout page without a reload
            window.location.href = "checkout.html"; // Change this to your actual checkout page
          } else {
            alert(
              "Your cart is empty. Please add items to the cart before proceeding."
            );
          }
        });

      // Function to render cart items in the cart tab
      const renderCartItems = () => {
        cartTabContentContainer.innerHTML = ""; // Clear existing items

        cartItems.forEach((item, index) => {
          const itemHTML = `
     <div class="cartTabContent" style="width:400px;">
          <div class="cartTabImage"><img src="
          ${item.image}" alt="" style="width: 70px" /></div>
       
            <div style="max-width:200px; display:flex; flex-direction:column; align-items:start">

           <div class="width:200px">
             ${item.name}
             </div>
            
          
            <div style="margin-top:7px;">
              Size: <span class="cartTabSize" style="color:black;">${
                item.size
              }</span> <br> 
            </div>
            <div class="qty" style="margin-left:-14px;">
              <i class="fa-solid fa-minus" data-index="${index}"></i>
              <span id="sp" style="color:black;">${item.quantity}</span>
              <i class="fa-solid fa-plus" data-index="${index}"></i>
            </div>
          </div >
          <div style="display:flex; flex-direction:column; margin-bottom:24px;">
            <i class="fa-solid fa-xmark close" style="font-size: 20px; color: black; padding: 15px;" data-index="${index}"></i><br />
            <span class="cartTabPrice" style="color:black;">${
              item.price * item.quantity
            }ks</span>
          </div>
        </div>
        <hr />
    `;
          cartTabContentContainer.insertAdjacentHTML("beforeend", itemHTML);
        });

        // Event listeners for removing, increasing, and decreasing items in the cart
        document.querySelectorAll(".fa-minus").forEach((button) => {
          button.addEventListener("click", (event) => {
            const index = event.target.getAttribute("data-index");
            if (cartItems[index].quantity > 1) {
              cartItems[index].quantity--;
              saveCartItems();
              renderCartItems();
              updateCartBadge();
              updateTotalPrice();
            }
          });
        });

        document.querySelectorAll(".fa-plus").forEach((button) => {
          button.addEventListener("click", (event) => {
            const index = event.target.getAttribute("data-index");
            cartItems[index].quantity++;
            saveCartItems();
            renderCartItems();
            updateCartBadge();
            updateTotalPrice();
          });
        });

        document
          .querySelectorAll(".cartTabContent .close")
          .forEach((button) => {
            button.addEventListener("click", (event) => {
              const index = event.target.getAttribute("data-index");
              cartItems.splice(index, 1);
              saveCartItems();
              renderCartItems();
              updateCartBadge();
              updateTotalPrice();
            });
          });

        updateTotalPrice(); // Update total price after rendering
      };

      // Function to calculate and update the subtotal price in the cart tab
      const updateTotalPrice = () => {
        const totalPrice = cartItems.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        document.querySelector(
          ".CartTabSubTotalPrice"
        ).textContent = `${totalPrice}ks`;
      };

      // Function to save cart items to localStorage
      const saveCartItems = () => {
        localStorage.setItem("cartItems", JSON.stringify(cartItems));
      };

      // Event listener for opening the cart tab
      cartIcon.addEventListener("click", () => {
        body.classList.toggle("showCart");
        body.style.overflow = "hidden";
        overlay.style.display = "block";
        renderCartItems(); // Render the cart items when the cart tab is opened
      });

      // Event listener for closing the cart tab
      closeCart.addEventListener("click", () => {
        body.classList.toggle("showCart");
        body.style.overflow = "scroll";
        overlay.style.display = "none";
      });

      overlay.addEventListener("click", () => {
        body.classList.toggle("showCart");
        overlay.style.display = "none";
        body.style.overflow = "scroll";
      });

      // Load cart items and update the cart badge when the page loads
      window.addEventListener("load", () => {
        updateCartBadge();
        renderCartItems(); // Ensure the cart content is also rendered on page load
      });
      // Listen for cart updates from the shopping page
      window.addEventListener("cartUpdated", () => {
        cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
        updateCartBadge();
        renderCartItems();
      });
    </script>
  </body>
</html>
